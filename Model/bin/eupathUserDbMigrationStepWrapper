#!/usr/bin/perl

use strict;
my ($stepName) = @ARGV;

# 

die "
A wrapper to run commands, called by eupathUserDbMigration, from its control dir

usage: eupathUserDbMigrationStepWrapper step_name

" unless $stepName;

my $cmd = <STDIN>;
chomp $cmd;
my $t = time();
system("echo '$cmd' > $stepName.running");
system("$cmd > $stepName.$t.out 2> $stepName.$t.err");
my $status = $? >> 8;

system("echo '$cmd' > $stepName.done") unless $status;
system("echo '$cmd' > $stepName.failed") if $status;
unlink "$stepName.running" || die "Can't unlink '$stepName.running'\n";





